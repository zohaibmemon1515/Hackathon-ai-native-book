"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[8201],{5214:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"ros2/chapter2/lesson2","title":"Understanding Quality of Service (QoS) Settings","description":"Learning Objectives","source":"@site/docs/ros2/chapter2/lesson2.md","sourceDirName":"ros2/chapter2","slug":"/ros2/chapter2/lesson2","permalink":"/Hackathon-ai-native-book/docs/ros2/chapter2/lesson2","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ros2/chapter2/lesson2.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Understanding Quality of Service (QoS) Settings","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to ROS 2 Client Libraries","permalink":"/Hackathon-ai-native-book/docs/ros2/chapter2/lesson1"},"next":{"title":"Managing Time in ROS 2","permalink":"/Hackathon-ai-native-book/docs/ros2/chapter2/lesson3"}}');var r=s(4848),o=s(8453);const t={title:"Understanding Quality of Service (QoS) Settings",sidebar_position:2},l=void 0,c={},a=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Concept Explanation",id:"concept-explanation",level:2},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Mathematical or technical breakdown",id:"mathematical-or-technical-breakdown",level:2},{value:"Mini-Project",id:"mini-project",level:2},{value:"Summary",id:"summary",level:2},{value:"APA-style references",id:"apa-style-references",level:2}];function d(e){const i={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Define Quality of Service (QoS) in ROS 2."}),"\n",(0,r.jsx)(i.li,{children:"Understand the different QoS policies and their impact on communication."}),"\n",(0,r.jsx)(i.li,{children:"Learn how to configure QoS settings for publishers and subscribers."}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"concept-explanation",children:"Concept Explanation"}),"\n",(0,r.jsxs)(i.p,{children:["ROS 2 uses ",(0,r.jsx)(i.strong,{children:"Quality of Service (QoS) settings"})," to configure the underlying DDS communication. QoS policies allow developers to define the behavior of publishers and subscribers, influencing factors like reliability, latency, and data persistence. This is crucial for matching communication needs to application requirements (e.g., real-time control vs. logging)."]}),"\n",(0,r.jsx)(i.p,{children:"Key QoS policies include:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Durability"}),": Whether messages persist for late-joining subscribers."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Liveliness"}),": How the system detects if a publisher is still active."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Reliability"}),": Guarantees about message delivery (best effort vs. reliable)."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"History"}),": How many messages or how much time to keep in the history buffer."]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Deadline"}),": Maximum expected time between messages."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["A robot's emergency stop system might use ",(0,r.jsx)(i.code,{children:"reliable"})," reliability and ",(0,r.jsx)(i.code,{children:"volatile"})," durability to ensure immediate delivery of critical messages to active subscribers."]}),"\n",(0,r.jsxs)(i.li,{children:["A sensor data logger might use ",(0,r.jsx)(i.code,{children:"transient_local"})," durability to ensure new subscribers receive a backlog of recent data."]}),"\n",(0,r.jsxs)(i.li,{children:["A high-frequency odometry publisher might use ",(0,r.jsx)(i.code,{children:"best_effort"})," reliability to prioritize low latency over guaranteed delivery."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"mathematical-or-technical-breakdown",children:"Mathematical or technical breakdown"}),"\n",(0,r.jsxs)(i.p,{children:["QoS profiles are sets of policies. ROS 2 provides default profiles (e.g., ",(0,r.jsx)(i.code,{children:"sensor_data"}),", ",(0,r.jsx)(i.code,{children:"system_default"}),", ",(0,r.jsx)(i.code,{children:"parameters"}),", ",(0,r.jsx)(i.code,{children:"services"}),", ",(0,r.jsx)(i.code,{children:"qos_profile_default"}),") and allows for custom profiles.\nWhen creating a publisher or subscriber, you can pass a ",(0,r.jsx)(i.code,{children:"QoSProfile"})," object with desired policies:"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"from rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy, DurabilityPolicy\n\n# Example QoS profile for reliable communication\nqos_profile_reliable = QoSProfile(\n    reliability=ReliabilityPolicy.RELIABLE,\n    durability=DurabilityPolicy.TRANSIENT_LOCAL,\n    history=HistoryPolicy.KEEP_LAST,\n    depth=10\n)\n\n# When creating a publisher\nself.publisher = self.create_publisher(String, 'topic_name', qos_profile_reliable)\n\n# When creating a subscriber\nself.subscriber = self.create_subscription(String, 'topic_name', self.callback, qos_profile_reliable)\n"})}),"\n",(0,r.jsx)(i.h2,{id:"mini-project",children:"Mini-Project"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Experiment with QoS Settings"}),":"]}),"\n",(0,r.jsxs)(i.ol,{children:["\n",(0,r.jsx)(i.li,{children:"Create a simple ROS 2 publisher and subscriber pair."}),"\n",(0,r.jsxs)(i.li,{children:["Experiment with different QoS ",(0,r.jsx)(i.code,{children:"ReliabilityPolicy"})," settings (",(0,r.jsx)(i.code,{children:"BEST_EFFORT"})," and ",(0,r.jsx)(i.code,{children:"RELIABLE"}),") and ",(0,r.jsx)(i.code,{children:"HistoryPolicy"})," (",(0,r.jsx)(i.code,{children:"KEEP_LAST"})," and ",(0,r.jsx)(i.code,{children:"KEEP_ALL"}),")."]}),"\n",(0,r.jsxs)(i.li,{children:["Observe how messages are lost or retained under different network conditions (you might need to introduce artificial delays or packet loss in a more advanced setup to see ",(0,r.jsx)(i.code,{children:"BEST_EFFORT"})," effects)."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(i.p,{children:"ROS 2 QoS settings provide fine-grained control over DDS communication, allowing developers to optimize reliability, latency, and resource usage according to the specific requirements of each communication channel."}),"\n",(0,r.jsx)(i.h2,{id:"apa-style-references",children:"APA-style references"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["ROS 2 Documentation. (n.d.). ",(0,r.jsx)(i.em,{children:"About QoS Settings"}),". Retrieved from ",(0,r.jsx)(i.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html",children:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html"})]}),"\n",(0,r.jsxs)(i.li,{children:["Open Robotics. (n.d.). ",(0,r.jsx)(i.em,{children:"DDS-Glossary"}),". Retrieved from ",(0,r.jsx)(i.a,{href:"https://www.ros.org/reps/rep2000.html#dds-glossary",children:"https://www.ros.org/reps/rep2000.html#dds-glossary"})]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,i,s)=>{s.d(i,{R:()=>t,x:()=>l});var n=s(6540);const r={},o=n.createContext(r);function t(e){const i=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(o.Provider,{value:i},e.children)}}}]);
"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_book=globalThis.webpackChunkphysical_ai_humanoid_robotics_book||[]).push([[2008],{7335:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"ros2/chapter2/lesson3","title":"Managing Time in ROS 2","description":"Learning Objectives","source":"@site/docs/ros2/chapter2/lesson3.md","sourceDirName":"ros2/chapter2","slug":"/ros2/chapter2/lesson3","permalink":"/Hackathon-ai-native-book/docs/ros2/chapter2/lesson3","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ros2/chapter2/lesson3.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Managing Time in ROS 2","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Understanding Quality of Service (QoS) Settings","permalink":"/Hackathon-ai-native-book/docs/ros2/chapter2/lesson2"},"next":{"title":"Building ROS 2 Applications","permalink":"/Hackathon-ai-native-book/docs/category/building-ros-2-applications"}}');var o=n(4848),t=n(8453);const r={title:"Managing Time in ROS 2",sidebar_position:3},l=void 0,a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Concept Explanation",id:"concept-explanation",level:2},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Mathematical or technical breakdown",id:"mathematical-or-technical-breakdown",level:2},{value:"Mini-Project",id:"mini-project",level:2},{value:"Summary",id:"summary",level:2},{value:"APA-style references",id:"apa-style-references",level:2}];function d(e){const s={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Understand the concept of time sources in ROS 2."}),"\n",(0,o.jsxs)(s.li,{children:["Learn how to use ",(0,o.jsx)(s.code,{children:"ros_clock"})," for reproducible simulation and data playback."]}),"\n",(0,o.jsx)(s.li,{children:"Implement time-based operations in ROS 2 nodes."}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"concept-explanation",children:"Concept Explanation"}),"\n",(0,o.jsx)(s.p,{children:"Accurate and synchronized time is crucial in robotics for tasks like timestamping sensor data, coordinating multi-robot systems, and replaying logged data for analysis. ROS 2 provides a standardized way to manage time, primarily through two sources:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:"System Time"}),": The wall-clock time from the operating system."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.strong,{children:(0,o.jsx)(s.code,{children:"ros_clock"})}),": A logical clock maintained by ROS 2, which can be configured to use system time or a simulated time source (e.g., from a simulator like Gazebo or for replaying bag files). ",(0,o.jsx)(s.code,{children:"ros_clock"})," is essential for reproducible experiments and debugging."]}),"\n"]}),"\n",(0,o.jsxs)(s.p,{children:["Nodes can specify which clock they should use. When ",(0,o.jsx)(s.code,{children:"use_sim_time"})," is enabled, nodes subscribe to the ",(0,o.jsx)(s.code,{children:"/clock"})," topic to get simulated time."]}),"\n",(0,o.jsx)(s.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Timestamping sensor readings from a LiDAR or camera to synchronize them."}),"\n",(0,o.jsxs)(s.li,{children:["Coordinating actions between multiple robots in a simulated environment using ",(0,o.jsx)(s.code,{children:"ros_clock"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Playing back a ROS 2 bag file with recorded sensor data and having all nodes process it as if it were live data, thanks to ",(0,o.jsx)(s.code,{children:"ros_clock"}),"."]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"mathematical-or-technical-breakdown",children:"Mathematical or technical breakdown"}),"\n",(0,o.jsxs)(s.p,{children:["ROS 2 uses the ",(0,o.jsx)(s.code,{children:"rclpy.time.Time"})," (Python) or ",(0,o.jsx)(s.code,{children:"rclcpp::Time"})," (C++) class to represent time.\nTo enable simulated time for a node:"]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:'# In your node\'s constructor\nself.get_logger().info("Using simulated time: %s" % self.get_clock().use_sim_time())\n# You can also manually set it\n# self.get_clock().set_ros_time_is_active(True)\n'})}),"\n",(0,o.jsx)(s.p,{children:"To publish a message with a timestamp:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-python",children:"from std_msgs.msg import Header\nmsg = Header()\nmsg.stamp = self.get_clock().now().to_msg() # Get current time from the node's clock\nself.publisher.publish(msg)\n"})}),"\n",(0,o.jsx)(s.h2,{id:"mini-project",children:"Mini-Project"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsxs)(s.strong,{children:["Publish Time-Stamped Messages with ",(0,o.jsx)(s.code,{children:"ros_clock"})]}),":"]}),"\n",(0,o.jsxs)(s.ol,{children:["\n",(0,o.jsxs)(s.li,{children:["Modify your ",(0,o.jsx)(s.code,{children:"talker"})," node to publish ",(0,o.jsx)(s.code,{children:"std_msgs/msg/Header"})," messages."]}),"\n",(0,o.jsxs)(s.li,{children:["Ensure the ",(0,o.jsx)(s.code,{children:"Header"}),"'s timestamp (",(0,o.jsx)(s.code,{children:"stamp"}),") is set using ",(0,o.jsx)(s.code,{children:"self.get_clock().now().to_msg()"}),"."]}),"\n",(0,o.jsxs)(s.li,{children:["Launch your ",(0,o.jsx)(s.code,{children:"talker"})," node with ",(0,o.jsx)(s.code,{children:"use_sim_time"})," enabled (e.g., ",(0,o.jsx)(s.code,{children:"ros2 run --ros-args -p use_sim_time:=true"}),")."]}),"\n",(0,o.jsxs)(s.li,{children:["If possible, integrate with a simple simulator that publishes to ",(0,o.jsx)(s.code,{children:"/clock"})," and observe how timestamps change."]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsxs)(s.p,{children:["ROS 2 time management allows for consistent and reproducible robotic operations by providing both system time and a logical ",(0,o.jsx)(s.code,{children:"ros_clock"})," that can be driven by simulators or bag files, crucial for complex and multi-robot systems."]}),"\n",(0,o.jsx)(s.h2,{id:"apa-style-references",children:"APA-style references"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["ROS 2 Documentation. (n.d.). ",(0,o.jsx)(s.em,{children:"About Time"}),". Retrieved from ",(0,o.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Time.html",children:"https://docs.ros.org/en/humble/Concepts/About-Time.html"})]}),"\n",(0,o.jsxs)(s.li,{children:["ROS 2 Documentation. (n.d.). ",(0,o.jsx)(s.em,{children:"Using Time in ROS 2"}),". Retrieved from ",(0,o.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Using-Time-In-ROS2/Using-Time-In-ROS2.html",children:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Using-Time-In-ROS2/Using-Time-In-ROS2.html"})]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var i=n(6540);const o={},t=i.createContext(o);function r(e){const s=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);